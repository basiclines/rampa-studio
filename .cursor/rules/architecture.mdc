---
description: 
globs: 
alwaysApply: true
---
## Architecture Overview
This application follows a clean, domain-driven architecture with clear separation of concerns:
- **UI Components**: Presentational only, minimal logic
- **Usecases**: Business logic and state management
- **Entities**: Data models and types
- **Engine**: Pure functions for color/harmony manipulation
- **tests**: Unit tests for usecases using bun test suite

## When Adding New Features

1. **New Data**: Add to entities first
2. **New Business Logic**: Create a usecase
3. **New Color Logic**: Add to `colorUtils`
4. **New UI**: Create lightweight component using usecases
5. **New State**: Consider if it needs a new Zustand store

## Don't Do This
- ❌ Business logic in components
- ❌ Passing `setColorRamps` as props
- ❌ Local state for shared data
- ❌ Color manipulation outside `colorUtils`
- ❌ Importing from `@/types/` (use `@/entities/`)
- ❌ Pure functions for state management (use Zustand)

## Instead Do This
- ✅ Business logic in usecases
- ✅ Use usecase hooks in components
- ✅ Shared state in Zustand stores
- ✅ Color functions in `@/engine`
- ✅ Import from `@/entities/`
- ✅ Hooks that return functions for actions

## When reviewing code, ensure:
- [ ] Components are lightweight and presentational
- [ ] Business logic is in usecases, not components
- [ ] Color manipulation uses `@/engine` functions
- [ ] Imports use correct paths (`@/entities/`, `@/usecases/`)
- [ ] State management uses Zustand stores
- [ ] No deprecated patterns (pure functions for state, prop drilling)
- [ ] Proper separation of concerns maintained